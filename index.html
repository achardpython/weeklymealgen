<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Meal Planner</title>
    <style>
        * {
            margin: 0;
            padding: 0;
            box-sizing: border-box;
        }
        
        body {
            font-family: -apple-system, BlinkMacSystemFont, 'Segoe UI', Roboto, sans-serif;
            background: linear-gradient(to bottom right, #eff6ff, #e0e7ff);
            min-height: 100vh;
            padding: 1rem;
        }
        
        .container {
            max-width: 48rem;
            margin: 0 auto;
        }
        
        .card {
            background: white;
            border-radius: 0.5rem;
            box-shadow: 0 10px 15px -3px rgba(0, 0, 0, 0.1);
            padding: 1.5rem;
            margin-bottom: 1rem;
        }
        
        h1 {
            font-size: 1.875rem;
            font-weight: bold;
            color: #312e81;
            margin-bottom: 0.5rem;
        }
        
        .subtitle {
            color: #4b5563;
            margin-bottom: 1rem;
        }
        
        .tabs {
            display: flex;
            gap: 0.5rem;
            margin-bottom: 1.5rem;
        }
        
        .tab {
            display: flex;
            align-items: center;
            gap: 0.5rem;
            padding: 0.5rem 1rem;
            border-radius: 0.5rem;
            font-weight: 500;
            cursor: pointer;
            border: none;
            transition: all 0.2s;
        }
        
        .tab.active {
            background: #4f46e5;
            color: white;
        }
        
        .tab:not(.active) {
            background: #e5e7eb;
            color: #374151;
        }
        
        .tab:not(.active):hover {
            background: #d1d5db;
        }
        
        .input-group {
            display: flex;
            gap: 0.75rem;
            margin-bottom: 1.5rem;
        }
        
        .input-wrapper {
            flex: 1;
        }
        
        label {
            display: block;
            font-size: 0.875rem;
            font-weight: 500;
            color: #374151;
            margin-bottom: 0.5rem;
        }
        
        input {
            width: 100%;
            padding: 0.5rem 1rem;
            border: 1px solid #d1d5db;
            border-radius: 0.5rem;
            font-size: 1rem;
        }
        
        input:focus {
            outline: none;
            border-color: #4f46e5;
            box-shadow: 0 0 0 3px rgba(79, 70, 229, 0.1);
        }
        
        .btn {
            display: flex;
            align-items: center;
            justify-content: center;
            gap: 0.5rem;
            padding: 0.5rem 1.5rem;
            border-radius: 0.5rem;
            font-weight: 500;
            cursor: pointer;
            border: none;
            transition: all 0.2s;
            font-size: 1rem;
        }
        
        .btn-primary {
            background: #4f46e5;
            color: white;
        }
        
        .btn-primary:hover {
            background: #4338ca;
        }
        
        .btn-success {
            background: #059669;
            color: white;
            width: 100%;
        }
        
        .btn-success:hover {
            background: #047857;
        }
        
        .btn-danger {
            background: transparent;
            color: #dc2626;
            padding: 0.5rem;
        }
        
        .btn-danger:hover {
            background: #fef2f2;
        }
        
        .meal-plan-container {
            background: #eef2ff;
            border-radius: 0.5rem;
            padding: 1rem;
        }
        
        .meal-plan-title {
            font-size: 1.25rem;
            font-weight: bold;
            color: #312e81;
            margin-bottom: 1rem;
        }
        
        .meal-card {
            background: white;
            border-radius: 0.5rem;
            padding: 1rem;
            margin-bottom: 0.75rem;
            box-shadow: 0 1px 3px rgba(0, 0, 0, 0.1);
        }
        
        .meal-card-header {
            display: flex;
            justify-content: space-between;
            align-items: start;
        }
        
        .day-label {
            font-size: 0.875rem;
            font-weight: 500;
            color: #6b7280;
            margin-bottom: 0.25rem;
        }
        
        .meal-name {
            font-size: 1.125rem;
            font-weight: bold;
            color: #111827;
        }
        
        .meal-details {
            text-align: right;
            font-size: 0.875rem;
            color: #4b5563;
        }
        
        .add-meal-section {
            background: #eef2ff;
            border-radius: 0.5rem;
            padding: 1rem;
            margin-bottom: 1.5rem;
        }
        
        .section-title {
            font-size: 1.125rem;
            font-weight: bold;
            color: #312e81;
            margin-bottom: 1rem;
        }
        
        .input-grid {
            display: grid;
            grid-template-columns: 1fr 1fr;
            gap: 0.75rem;
            margin-bottom: 0.75rem;
        }
        
        .meal-list-item {
            background: #f9fafb;
            border-radius: 0.5rem;
            padding: 1rem;
            display: flex;
            justify-content: space-between;
            align-items: center;
            margin-bottom: 0.5rem;
        }
        
        .meal-list-name {
            font-weight: 600;
            color: #111827;
            margin-bottom: 0.25rem;
        }
        
        .meal-list-details {
            font-size: 0.875rem;
            color: #4b5563;
        }
        
        .hidden {
            display: none;
        }
        
        svg {
            width: 18px;
            height: 18px;
        }
    </style>
</head>
<body>
    <div class="container">
        <div class="card">
            <h1>Meal Planner</h1>
            <p class="subtitle">Never eat the same carb or meat twice in a row</p>
            
            <div class="tabs">
                <button class="tab active" onclick="setView('planner')">
                    <svg fill="none" stroke="currentColor" viewBox="0 0 24 24"><path stroke-linecap="round" stroke-linejoin="round" stroke-width="2" d="M8 7V3m8 4V3m-9 8h10M5 21h14a2 2 0 002-2V7a2 2 0 00-2-2H5a2 2 0 00-2 2v12a2 2 0 002 2z"></path></svg>
                    Planner
                </button>
                <button class="tab" onclick="setView('meals')">
                    <svg fill="none" stroke="currentColor" viewBox="0 0 24 24"><path stroke-linecap="round" stroke-linejoin="round" stroke-width="2" d="M4 6h16M4 12h16M4 18h16"></path></svg>
                    Manage Meals
                </button>
            </div>
            
            <div id="plannerView">
                <div class="input-group">
                    <div class="input-wrapper">
                        <label>Number of days</label>
                        <input type="number" id="numDays" value="7" min="1" max="14">
                    </div>
                    <div style="display: flex; align-items: flex-end;">
                        <button class="btn btn-primary" onclick="generateMealPlan()">
                            <svg fill="none" stroke="currentColor" viewBox="0 0 24 24"><path stroke-linecap="round" stroke-linejoin="round" stroke-width="2" d="M4 4v5h.582m15.356 2A8.001 8.001 0 004.582 9m0 0H9m11 11v-5h-.581m0 0a8.003 8.003 0 01-15.357-2m15.357 2H15"></path></svg>
                            Generate Plan
                        </button>
                    </div>
                </div>
                
                <div id="mealPlan" class="hidden">
                    <div class="meal-plan-container">
                        <div class="meal-plan-title">Your Meal Plan</div>
                        <div id="mealPlanList"></div>
                    </div>
                </div>
            </div>
            
            <div id="mealsView" class="hidden">
                <div class="add-meal-section">
                    <div class="section-title">Add New Meal</div>
                    <input type="text" id="newMealName" placeholder="Meal name" style="margin-bottom: 0.75rem;">
                    <div class="input-grid">
                        <input type="text" id="newMealCarb" placeholder="Carb (e.g., Rice)">
                        <input type="text" id="newMealMeat" placeholder="Meat (e.g., Chicken)">
                    </div>
                    <button class="btn btn-success" onclick="addMeal()">
                        <svg fill="none" stroke="currentColor" viewBox="0 0 24 24"><path stroke-linecap="round" stroke-linejoin="round" stroke-width="2" d="M12 4v16m8-8H4"></path></svg>
                        Add Meal
                    </button>
                </div>
                
                <div>
                    <div style="display: flex; justify-content: space-between; align-items: center; margin-bottom: 0.75rem;">
                        <div class="section-title" style="margin-bottom: 0;">All Meals (<span id="mealCount">0</span>)</div>
                        <button class="btn btn-danger" onclick="resetToDefaults()" style="font-size: 0.875rem; padding: 0.5rem 1rem;">
                            Reset to Defaults
                        </button>
                    </div>
                    <div id="mealList"></div>
                </div>
            </div>
        </div>
    </div>

    <script>
        const defaultMeals = [
            { id: 1, name: "Spaghetti Bolognese", carb: "Pasta", meat: "Beef" },
            { id: 2, name: "Chicken Tagliatelle", carb: "Pasta", meat: "Chicken" },
            { id: 3, name: "Lasagna", carb: "Pasta", meat: "Beef" },
            { id: 4, name: "Feta Spinach Salmon Pasta", carb: "Pasta", meat: "Salmon" },
            { id: 5, name: "Feta Tomato Pasta", carb: "Pasta", meat: "Salami" },
            { id: 6, name: "Bacon Pasta", carb: "Pasta", meat: "Bacon" },
            { id: 7, name: "Salmon", carb: "Potatoes", meat: "Salmon" },
            { id: 8, name: "Chicken Roast Dinner", carb: "Potatoes", meat: "Chicken" },
            { id: 9, name: "Beef Roast Dinner", carb: "Potatoes", meat: "Beef" },
            { id: 10, name: "Steak", carb: "Chips", meat: "Beef" },
            { id: 11, name: "Burgers", carb: "Chips", meat: "Beef" },
            { id: 12, name: "Stir Fry", carb: "Noodles", meat: "Chicken" },
            { id: 13, name: "Quiche", carb: "Potatoes", meat: "Bacon" },
            { id: 14, name: "Chicken and Ribs", carb: "Chips", meat: "Chicken" }
        ];

        let meals = [];
        
        function loadMeals() {
            const saved = localStorage.getItem('meals');
            meals = saved ? JSON.parse(saved) : defaultMeals;
            renderMealList();
        }
        
        function saveMeals() {
            localStorage.setItem('meals', JSON.stringify(meals));
        }
        
        function setView(view) {
            const tabs = document.querySelectorAll('.tab');
            tabs.forEach(tab => tab.classList.remove('active'));
            event.target.closest('.tab').classList.add('active');
            
            document.getElementById('plannerView').classList.toggle('hidden', view !== 'planner');
            document.getElementById('mealsView').classList.toggle('hidden', view !== 'meals');
        }
        
        function generateMealPlan() {
            if (meals.length === 0) {
                alert("Please add some meals first!");
                return;
            }
            
            const numDays = parseInt(document.getElementById('numDays').value) || 7;
            const plan = [];
            const usedMealIds = new Set();
            let lastCarb = null;
            let lastMeat = null;
            
            for (let i = 0; i < numDays; i++) {
                let validMeals = meals.filter(meal => 
                    !usedMealIds.has(meal.id) &&
                    meal.carb !== lastCarb && 
                    meal.meat !== lastMeat
                );
                
                if (validMeals.length === 0) {
                    validMeals = meals.filter(meal =>
                        !usedMealIds.has(meal.id) &&
                        (meal.carb !== lastCarb || meal.meat !== lastMeat)
                    );
                }
                
                if (validMeals.length === 0) {
                    validMeals = meals.filter(meal => !usedMealIds.has(meal.id));
                }
                
                if (validMeals.length === 0) {
                    alert("Not enough meals for " + numDays + " days without repeats. Please add more meals or reduce the number of days.");
                    return;
                }
                
                const chosen = validMeals[Math.floor(Math.random() * validMeals.length)];
                plan.push(chosen);
                usedMealIds.add(chosen.id);
                lastCarb = chosen.carb;
                lastMeat = chosen.meat;
            }
            
            renderMealPlan(plan);
        }
        
        function renderMealPlan(plan) {
            const container = document.getElementById('mealPlan');
            const list = document.getElementById('mealPlanList');
            
            list.innerHTML = plan.map((meal, index) => `
                <div class="meal-card">
                    <div class="meal-card-header">
                        <div>
                            <div class="day-label">Day ${index + 1}</div>
                            <div class="meal-name">${meal.name}</div>
                        </div>
                        <div class="meal-details">
                            <div><strong>Carb:</strong> ${meal.carb}</div>
                            <div><strong>Meat:</strong> ${meal.meat}</div>
                        </div>
                    </div>
                </div>
            `).join('');
            
            container.classList.remove('hidden');
        }
        
        function addMeal() {
            const name = document.getElementById('newMealName').value.trim();
            const carb = document.getElementById('newMealCarb').value.trim();
            const meat = document.getElementById('newMealMeat').value.trim();
            
            if (!name || !carb || !meat) {
                alert("Please fill in all fields");
                return;
            }
            
            const meal = {
                id: Date.now(),
                name: name,
                carb: carb,
                meat: meat
            };
            
            meals.push(meal);
            saveMeals();
            renderMealList();
            
            document.getElementById('newMealName').value = '';
            document.getElementById('newMealCarb').value = '';
            document.getElementById('newMealMeat').value = '';
        }
        
        function deleteMeal(id) {
            meals = meals.filter(m => m.id !== id);
            saveMeals();
            renderMealList();
        }
        
        function renderMealList() {
            const list = document.getElementById('mealList');
            const count = document.getElementById('mealCount');
            
            count.textContent = meals.length;
            
            list.innerHTML = meals.map(meal => `
                <div class="meal-list-item">
                    <div>
                        <div class="meal-list-name">${meal.name}</div>
                        <div class="meal-list-details">${meal.carb} â€¢ ${meal.meat}</div>
                    </div>
                    <button class="btn btn-danger" onclick="deleteMeal(${meal.id})">
                        <svg fill="none" stroke="currentColor" viewBox="0 0 24 24"><path stroke-linecap="round" stroke-linejoin="round" stroke-width="2" d="M19 7l-.867 12.142A2 2 0 0116.138 21H7.862a2 2 0 01-1.995-1.858L5 7m5 4v6m4-6v6m1-10V4a1 1 0 00-1-1h-4a1 1 0 00-1 1v3M4 7h16"></path></svg>
                    </button>
                </div>
            `).join('');
        }
        
        function resetToDefaults() {
            if (confirm("This will delete all your current meals and restore the default meal list. Are you sure?")) {
                meals = JSON.parse(JSON.stringify(defaultMeals));
                saveMeals();
                renderMealList();
            }
        }
        
        loadMeals();
    </script>
</body>
</html>
